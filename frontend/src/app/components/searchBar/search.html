<div class="search-bar" (click)="onDocumentClick($event)">
  @if (!isSearchVisible) {
  <div class="search-icon-container" (click)="toggleSearch($event)">
    <ng-container *ngIf="!isSearchVisible">
      <!-- Показываем иконку только если строка поиска не видима -->
      <svg
        width="22"
        height="22"
        viewBox="0 0 22 22"
        fill="none"
        xmlns="http://www.w3.org/2000/svg">
        <path
          d="M21.1634 19.6864L17.2864 15.8408C18.7913 13.9644 19.5201 11.5828 19.3229 9.18552C19.1257 6.78829 18.0176 4.55772 16.2263 2.95245C14.435 1.34718 12.0967 0.489243 9.69231 0.555036C7.28788 0.62083 5.00004 1.60536 3.29922 3.30618C1.5984 5.007 0.613872 7.29484 0.548078 9.69927C0.482285 12.1037 1.34023 14.442 2.94549 16.2332C4.55076 18.0245 6.78133 19.1327 9.17856 19.3299C11.5758 19.5271 13.9575 18.7983 15.8339 17.2934L19.6795 21.139C19.7766 21.2369 19.8922 21.3147 20.0195 21.3677C20.1469 21.4208 20.2835 21.4481 20.4214 21.4481C20.5594 21.4481 20.696 21.4208 20.8233 21.3677C20.9506 21.3147 21.0662 21.2369 21.1634 21.139C21.3517 20.9441 21.457 20.6837 21.457 20.4127C21.457 20.1417 21.3517 19.8813 21.1634 19.6864ZM9.97141 17.2934C8.52463 17.2934 7.11035 16.8644 5.9074 16.0606C4.70446 15.2568 3.76688 14.1143 3.21322 12.7777C2.65956 11.4411 2.5147 9.97025 2.79695 8.55128C3.07921 7.13231 3.77589 5.8289 4.79891 4.80587C5.82194 3.78285 7.12535 3.08616 8.54432 2.80391C9.96329 2.52166 11.4341 2.66652 12.7707 3.22018C14.1074 3.77383 15.2498 4.71142 16.0536 5.91436C16.8574 7.11731 17.2864 8.53159 17.2864 9.97836C17.2864 11.9184 16.5157 13.779 15.1439 15.1509C13.7721 16.5227 11.9115 17.2934 9.97141 17.2934Z"
          fill="black" />
      </svg>
    </ng-container>
  </div>
  }
  <input
    class="P MP-R"
    *ngIf="isSearchVisible"
    type="text"
    [(ngModel)]="searchTerm"
    (input)="onInputChange()"
    placeholder="Поиск"
    (click)="$event.stopPropagation()" />

  <div class="search-results" *ngIf="isSearchVisible && searchResults">
    <ng-container *ngFor="let result of searchResults">
      <div
        class="P MP-R result-item"
        *ngFor="let r of result"
        (click)="selectResult(r)">
        {{ r.name || r.officeName || r.fullWorkerName || r.workspaceName }}
      </div>
    </ng-container>
  </div>
</div>
